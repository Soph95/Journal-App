(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{103:function(e,t,a){},104:function(e,t,a){},115:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),i=a.n(c),o=(a(103),a(11)),s=(a(104),a(43)),l=a.n(s),d=a(57);function j(){return(j=Object(d.a)(l.a.mark((function e(t,a,n,r,c){var i,o,s,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:n})});case 2:if(!(i=e.sent).ok){e.next=14;break}return e.next=6,i.json();case 6:o=e.sent,s=o.jwt,d=o.userId,localStorage.setItem("jwt",s),localStorage.setItem("userId",d.toString()),r(),e.next=15;break;case 14:c(!0);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var u=function(e,t,a,n,r){return j.apply(this,arguments)},b=a(19),h=a(61),x=a.n(h),g=a(158),p=a(160),O=a(178),m=a(38),f=a(161),v=a(174),y=a(163),w=a(175),S=a(156),C=a(2);var N=function(e){var t=e.onLogin,a=Object(n.useState)(""),r=Object(o.a)(a,2),c=r[0],i=r[1],s=Object(n.useState)(""),l=Object(o.a)(s,2),d=l[0],j=l[1],h=Object(n.useState)(!1),N=Object(o.a)(h,2),T=N[0],I=N[1],k=Object(S.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}))();return Object(C.jsxs)(g.a,{component:"main",maxWidth:"xs",children:[Object(C.jsx)(p.a,{}),Object(C.jsxs)("div",{className:k.paper,children:[Object(C.jsx)(O.a,{className:k.avatar,children:Object(C.jsx)(x.a,{})}),Object(C.jsx)(m.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(C.jsxs)("form",{className:k.form,noValidate:!0,children:[Object(C.jsxs)(f.a,{container:!0,spacing:2,children:[Object(C.jsx)(f.a,{item:!0,xs:12,children:Object(C.jsx)(v.a,{error:T,helperText:T?"Username already exists":"",autoComplete:"fname",name:"username",variant:"outlined",required:!0,fullWidth:!0,label:"Username",autoFocus:!0,value:c,onChange:function(e){return i(e.target.value)}})}),Object(C.jsx)(f.a,{item:!0,xs:12,children:Object(C.jsx)(v.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",autoComplete:"current-password",value:d,onChange:function(e){return j(e.target.value)}})}),Object(C.jsx)(f.a,{item:!0,xs:12})]}),Object(C.jsx)(y.a,{disabled:c.length<1||d.length<1,fullWidth:!0,variant:"contained",color:"primary",onClick:function(){return u("/users",c,d,t,I)},children:"Sign Up"}),Object(C.jsx)(f.a,{container:!0,justifyContent:"flex-end",children:Object(C.jsxs)(f.a,{item:!0,children:[Object(C.jsx)("br",{}),Object(C.jsx)(b.b,{to:"/",variant:"body2",children:"Already have an account? Sign in"})]})})]})]}),Object(C.jsx)(w.a,{mt:5,children:Object(C.jsxs)(m.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",(new Date).getFullYear(),"."]})})]})};var T=function(e){var t=e.onLogin,a=Object(n.useState)(""),r=Object(o.a)(a,2),c=r[0],i=r[1],s=Object(n.useState)(""),l=Object(o.a)(s,2),d=l[0],j=l[1],h=Object(n.useState)(!1),N=Object(o.a)(h,2),T=N[0],I=N[1],k=Object(S.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}))();return Object(C.jsxs)(g.a,{component:"main",maxWidth:"xs",children:[Object(C.jsx)(p.a,{}),Object(C.jsxs)("div",{className:k.paper,children:[Object(C.jsx)(O.a,{className:k.avatar,children:Object(C.jsx)(x.a,{})}),Object(C.jsx)(m.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(C.jsxs)("form",{className:k.form,noValidate:!0,children:[Object(C.jsx)(v.a,{error:T,helperText:T?"Username or password incorrect":"",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Username",name:"username",autoComplete:"username",value:c,onChange:function(e){return i(e.target.value)},autoFocus:!0}),Object(C.jsx)(v.a,{error:T,helperText:T?"Username or password incorrect":"",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",autoComplete:"current-password",value:d,onChange:function(e){return j(e.target.value)}}),Object(C.jsx)(y.a,{fullWidth:!0,variant:"contained",color:"primary",className:"login-btn",onClick:function(){return u("/login",c,d,t,I)},children:"Sign In"}),Object(C.jsx)(f.a,{container:!0,justifyContent:"flex-end",children:Object(C.jsxs)(f.a,{item:!0,children:[Object(C.jsx)("br",{}),Object(C.jsx)(b.b,{to:"/signup",variant:"body2",children:"Don't have an account? Sign Up"})]})})]})]}),Object(C.jsx)(w.a,{mt:8,children:Object(C.jsxs)(m.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",(new Date).getFullYear(),"."]})})]})};var I=function(){return Object(C.jsxs)("div",{children:[Object(C.jsx)("h2",{children:"Sorry"}),Object(C.jsx)("h2",{children:"Page Not Found"}),Object(C.jsx)(b.b,{to:"/",children:"Go back to home page"})]})},k=a(14);var E=function(e){var t=e.onLogin;return Object(C.jsx)(b.a,{children:Object(C.jsxs)(k.c,{children:[Object(C.jsx)(k.a,{exact:!0,path:"/signup",children:Object(C.jsx)(N,{onLogin:t})}),Object(C.jsx)(k.a,{exact:!0,path:"/",children:Object(C.jsx)(T,{onLogin:t})}),Object(C.jsx)(k.a,{path:"*",children:Object(C.jsx)(I,{})})]})})};var F=function(e,t){var a=Object(n.useState)(null),r=Object(o.a)(a,2),c=r[0],i=r[1],s=Object(n.useState)(!0),l=Object(o.a)(s,2),d=l[0],j=l[1];return Object(n.useEffect)((function(){fetch(e,{method:t,headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){i(e),j(!1)}))}),[e]),{data:c,isPending:d}};var L=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),i=Object(o.a)(c,2),s=i[0],j=i[1],u=localStorage.getItem("userId"),b=localStorage.getItem("jwt"),h=F("/users/".concat(u),"GET").data,x=Object(S.a)((function(e){return{typography:{paddingTop:100,marginBottom:e.spacing(8),fontFamily:"Dancing Script",borderBottom:"2px solid #FF0075",width:"30%",margin:"auto"},field:{marginTop:e.spacing(3),marginBottom:e.spacing(3),width:"50%"}}}))();function g(){return(g=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/users/".concat(u,"/entries"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+b},body:JSON.stringify({title:a,content:s})});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(C.jsx)("div",{className:"background",children:Object(C.jsxs)(w.a,{textAlign:"center",children:[Object(C.jsxs)(m.a,{className:x.typography,variant:"h2",align:"center",gutterBottom:!0,children:[h&&h.username.slice(0,1).toUpperCase()+h.username.slice(1).toLowerCase(),"'s Journal"]}),Object(C.jsx)(m.a,{variant:"h4",children:"Add an entry"}),Object(C.jsxs)("form",{noValidate:!0,autoComplete:"off",children:[Object(C.jsx)(v.a,{className:x.field,color:"secondary",variant:"outlined",label:"Entry Title",required:!0,value:a,onChange:function(e){return r(e.target.value)}})," ",Object(C.jsx)("br",{}),Object(C.jsx)(v.a,{className:x.field,variant:"outlined",color:"secondary",label:"Content",multiline:!0,rows:4,required:!0,value:s,onChange:function(e){return j(e.target.value)}}),Object(C.jsx)("br",{}),Object(C.jsx)(y.a,{disabled:a.length<1||s.length<1,variant:"contained",color:"secondary",onClick:function(){return g.apply(this,arguments)},href:"/entries",children:"Add entry"})]})]})})},A=a(164),B=a(165),D=a(166),P=a(167),q=a(85),U=a.n(q);var W=function(e){var t=e.data,a=localStorage.getItem("userId"),r=Object(n.useState)(""),c=Object(o.a)(r,2),i=c[0],s=c[1],l=t.filter((function(e){return e.title.toLowerCase().includes(i.toLowerCase())})),d=i.length>0;return Object(C.jsxs)("div",{children:[t.length>0?Object(C.jsxs)(w.a,{textAlign:"center",margin:"30px",children:[Object(C.jsx)(v.a,{label:"Search entries by title",color:"secondary",value:i,onChange:function(e){return s(e.target.value)}}),d?Object(C.jsx)("button",{onClick:function(){return s("")},children:"X"}):""]}):"",Object(C.jsx)("br",{}),Object(C.jsx)(g.a,{children:Object(C.jsx)(f.a,{container:!0,spacing:3,children:l.map((function(e){return Object(C.jsx)(f.a,{item:!0,xs:12,md:6,lg:4,children:Object(C.jsxs)(A.a,{elevation:2,children:[Object(C.jsx)(B.a,{action:Object(C.jsx)(D.a,{href:"/entries",onClick:function(){return t=e.id,void fetch("/users/".concat(a,"/entries/").concat(t),{method:"DELETE"});var t},children:Object(C.jsx)(U.a,{})}),title:e.title,subheader:e.createdAt.slice(0,10).split("-").reverse().join("-")}),Object(C.jsxs)(P.a,{children:[Object(C.jsx)(m.a,{variant:"body2",color:"textSecondary",children:e.content}),Object(C.jsx)(w.a,{textAlign:"center",children:Object(C.jsx)(y.a,{color:"secondary",href:"/entries/".concat(e.id,"/update"),children:"Update"})})]})]})},e.id)}))})})]})};var J=function(e){var t=e.data,a=Object(S.a)({typography:{paddingTop:20,fontFamily:"Dancing Script",borderBottom:"2px solid #FF0075",width:"30%",margin:"auto"},btn:{margin:40}})();return Object(C.jsxs)("div",{className:"background",children:[Object(C.jsx)(m.a,{className:a.typography,variant:"h2",align:"center",gutterBottom:!0,children:"Entries"}),Object(C.jsx)(W,{data:t}),t.length>0?Object(C.jsx)(w.a,{textAlign:"center",children:Object(C.jsx)(y.a,{className:a.btn,color:"secondary",variant:"contained",href:"/",onClick:function(){var e=localStorage.getItem("userId");fetch("/users/".concat(e,"/entries"),{method:"DELETE"})},children:"Delete all entries"})}):Object(C.jsx)(m.a,{align:"center",variant:"h5",children:"No entries yet, add an entry to get started!"})]})};var V=function(){var e=localStorage.getItem("userId"),t=F("/users/".concat(e,"/entries"),"GET"),a=t.data,n=t.isPending;return Object(C.jsxs)("div",{children:[n&&Object(C.jsx)("div",{children:"Loading..."}),a&&Object(C.jsx)(J,{data:a})]})};var G=function(){var e,t,a,r=Object(k.f)().entryId,c=localStorage.getItem("userId"),i=Object(S.a)((function(e){return{typography:{paddingTop:20,marginBottom:e.spacing(8),fontFamily:"Dancing Script",borderBottom:"2px solid #FF0075",width:"30%",margin:"auto"},field:{marginTop:e.spacing(3),marginBottom:e.spacing(3),width:"50%"},btns:{margin:e.spacing(2)}}}))(),s=F("/users/".concat(c,"/entries/").concat(r),"GET").data;s&&s.map((function(n){e=n.title,t=n.content,a=n.id}));var l=Object(n.useState)(e),d=Object(o.a)(l,2),j=d[0],u=d[1],b=Object(n.useState)(t),h=Object(o.a)(b,2),x=h[0],g=h[1];return Object(C.jsx)("div",{className:"background",children:Object(C.jsxs)(w.a,{textAlign:"center",children:[Object(C.jsx)(m.a,{className:i.typography,variant:"h2",component:"h1",children:"Update Entry"}),Object(C.jsxs)("form",{noValidate:!0,autoComplete:"off",children:[Object(C.jsx)(v.a,{color:"secondary",variant:"outlined",label:"Entry Title",className:i.field,defaultValue:e,onChange:function(e){console.log(e.target.value),u(e.target.value)}}),Object(C.jsx)("br",{}),Object(C.jsx)(v.a,{color:"secondary",variant:"outlined",label:"Content",className:i.field,multiline:!0,rows:4,defaultValue:t,onChange:function(e){return g(e.target.value)}}),Object(C.jsx)("br",{}),Object(C.jsx)(y.a,{className:i.btns,color:"secondary",variant:"contained",onClick:function(){fetch("/users/".concat(c,"/entries/").concat(r),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:j,content:x})})},href:"/entries",children:"Submit"}),Object(C.jsx)(y.a,{className:i.btns,color:"secondary",variant:"contained",href:"/entries",children:"Cancel"})]},a)]})})};var z=function(){var e=Object(S.a)({typography:{paddingTop:20,fontFamily:"Dancing Script",borderBottom:"2px solid #FF0075",width:"30%",margin:"auto"},text:{margin:40}})();return Object(C.jsxs)("div",{className:"background",children:[Object(C.jsx)(m.a,{className:e.typography,variant:"h2",align:"center",gutterBottom:!0,children:"FAQ's"}),Object(C.jsxs)(m.a,{className:e.text,children:[Object(C.jsx)(m.a,{variant:"h6",children:"How is my personal data kept secure?"}),"This journal app has security measures in place to ensure the safety of your data. The technologies involved in this application allow for your password to be encrypted in transit. This data is then saved to the secure database, with a unique user code. Each time you attempt to login, the details you input will be checked against your existing login credentials and if they are identical you will gaim access to your account, otherwise access will be denied. When making specific changes within your account your unique code will be used as authorisation to allow you to complete this action. If the unique code does not match the code saved in the database then access will be denied. Each time you login, a new unique code will be generated providing extra security."]})]})},H=a(177),M=a(88),Q=a(171),Y=a(172),X=a(162),K=a(119),R=a(173),Z=a(168),$=a(169),_=a(170),ee=a(86),te=a.n(ee),ae=a(87),ne=a.n(ae);var re=function(e){var t=e.children,a=e.onLogout,r=localStorage.getItem("userId"),c=F("/users/".concat(r),"GET").data,i=[{path:"/",icon:Object(C.jsx)(Z.a,{color:"secondary"}),text:"Create New Entry"},{path:"/entries",icon:Object(C.jsx)($.a,{color:"secondary"}),text:"Entries"},{path:"/security",icon:Object(C.jsx)(_.a,{color:"secondary"}),text:"FAQ's"}],s=Object(n.useState)(null),l=Object(o.a)(s,2),d=l[0],j=l[1],u=Boolean(d),h=Object(S.a)({drawer:{width:240},drawerPaper:{width:240},root:{display:"flex"},text:{color:"black"},avatar:{margin:15,backgroundColor:"black"},page:{width:"100%"}})();return Object(C.jsxs)("div",{className:h.root,children:[Object(C.jsxs)(H.a,{className:h.drawer,variant:"permanent",anchor:"left",classes:{paper:h.drawerPaper},children:[Object(C.jsxs)("div",{children:[Object(C.jsx)(D.a,{"aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":u?"true":void 0,onClick:function(e){j(e.currentTarget)},children:Object(C.jsx)(O.a,{className:h.avatar,children:c&&c.username.slice(0,1)})}),"My Account",Object(C.jsxs)(M.a,{anchorEl:d,open:u,onClose:function(){j(null)},children:[Object(C.jsx)(b.b,{to:"/",children:Object(C.jsxs)(Q.a,{onClick:function(){localStorage.removeItem("jwt"),localStorage.removeItem("userId"),a()},className:h.text,children:[Object(C.jsx)(Y.a,{children:Object(C.jsx)(te.a,{fontSize:"small"})}),"Logout"]})}),Object(C.jsx)(b.b,{to:"/",children:Object(C.jsxs)(Q.a,{onClick:function(){if(window.confirm("Are you sure you want to delete yor account?")){var e=localStorage.getItem("userId");fetch("/users/".concat(e),{method:"DELETE"}).then((function(){localStorage.removeItem("jwt"),localStorage.removeItem("userId"),a()}))}},className:h.text,children:[Object(C.jsx)(Y.a,{children:Object(C.jsx)(ne.a,{fontSize:"small"})}),"Delete Account"]})})]})]}),Object(C.jsx)(X.a,{children:i.map((function(e){return Object(C.jsx)(b.b,{to:e.path,children:Object(C.jsxs)(K.a,{button:!0,children:[Object(C.jsx)(Y.a,{children:e.icon}),Object(C.jsx)(R.a,{className:h.text,primary:e.text})]})},e.text)}))})]}),Object(C.jsx)("div",{className:h.page,children:t})]})};var ce=function(e){var t=e.onLogout;return Object(C.jsx)(b.a,{children:Object(C.jsx)(re,{onLogout:t,children:Object(C.jsxs)(k.c,{children:[Object(C.jsx)(k.a,{exact:!0,path:"/",children:Object(C.jsx)(L,{})}),Object(C.jsx)(k.a,{exact:!0,path:"/entries",children:Object(C.jsx)(V,{})}),Object(C.jsx)(k.a,{exact:!0,path:"/entries/:entryId/update",children:Object(C.jsx)(G,{})}),Object(C.jsx)(k.a,{exact:!0,path:"/security",children:Object(C.jsx)(z,{})}),Object(C.jsx)(k.a,{exact:!0,path:"/signup",children:Object(C.jsx)(L,{})}),Object(C.jsx)(k.a,{path:"*",children:Object(C.jsx)(I,{})})]})})})};var ie=function(){var e=Object(n.useState)(!!localStorage.getItem("jwt")),t=Object(o.a)(e,2),a=t[0],r=t[1];return a?Object(C.jsx)(ce,{onLogout:function(){return r(!1)}}):Object(C.jsx)(E,{onLogin:function(){return r(!0)}})},oe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,181)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))};i.a.render(Object(C.jsx)(r.a.StrictMode,{children:Object(C.jsx)(ie,{})}),document.getElementById("root")),oe()}},[[115,1,2]]]);
//# sourceMappingURL=main.19f46157.chunk.js.map